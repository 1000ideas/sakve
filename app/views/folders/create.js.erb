var form = $('#new_folder');
<% if @folder.errors.any? %>
var errors = $("<%= j render partial: 'l/partials/errors', object: @folder.errors %>".trim());
var error_explanation = $('#error_explanation', form);
if (error_explanation.length == 0) {
  form.prepend( errors )
} else {
  error_explanation.replaceWith( errors );
}
<% else %>
var dialog_box = form.parent();
dialog_box.dialog('close');
form.each(function() { this.reset(); });
$('#root-folders').html("<%=j render @folders %>".trim());
$('#user-folders').html("<%=j render @user_folders %>".trim());
<% end %>
